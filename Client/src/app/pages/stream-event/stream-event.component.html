<app-sub-navbar></app-sub-navbar>

<section class="bg-[#f9f9f9] dark:bg-[#081d31]  h-full">
    <div class="grid grid-cols-7 ">


        <div class="col-span-7 md:col-span-5 py-10">
            <h1 class="text-center text-3xl mb-5 font-semibold dark:text-gray-300">Enjoy the stream</h1>
            <div id="stream-event-holder" class="mx-auto" style="width: 95%;">
                <div id="stream-iframe">
                    <iframe class="w-full h-96"
                        [src]="getSanitizedUrl(allOldStreams[allOldStreams.length - 1].streamUrlCode)" frameborder="0"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                        allowfullscreen></iframe>
                    <div class="stream-info p-2">
                        <h1 class="text-2xl font-semibold dark:text-gray-300">{{allOldStreams[allOldStreams.length -
                            1].streamTitle}}</h1>
                        <p class="truncate text-neutral-500">{{allOldStreams[allOldStreams.length - 1].author}}</p>
                        <p class="truncate text-neutral-500 ">{{allOldStreams[allOldStreams.length - 1].eventDate}}</p>
                    </div>

                </div>
                <div id="chat-iframe">

                </div>
            </div>
        </div>

        <aside class="relative overflow-hidden col-span-7 md:col-span-2 border-cyan-50 bg-[#eee] dark:bg-slate-900">
            <h1 class="text-2xl text-center py-4 mb-4 bg-slate-300 dark:bg-slate-800 dark:text-gray-300">Previous Streams</h1>
            <div class=" cursor-pointer px-3 pt-3 mb-4 scalling">
                <h3 class="pb-3 font-semibold dark:text-gray-300">Newest Stream</h3>
                <div class="flex md:flex-col lg:flex-row border-b-2 pb-8">
                    <img [src]="getThumbnailUrl(allOldStreams[allOldStreams.length - 1].streamUrlCode)"
                        alt="{{allOldStreams[allOldStreams.length - 1].streamTitle}}" class="w-1/2 h-24 md:w-full lg:w-1/2">
                    <div class="stream-info p-2 overflow-hidden">
                        <p class="truncate ... dark:text-gray-300 ">{{allOldStreams[allOldStreams.length - 1].streamTitle}}
                        </p>
                        <p class="truncate text-neutral-500 ">{{allOldStreams[allOldStreams.length - 1].author}}</p>
                        <p class="truncate text-neutral-500 ">{{allOldStreams[allOldStreams.length - 1].eventDate}}</p>
                    </div>
                </div>

            </div>
            @for (stream of allOldStreams; track $index) {
            <div class="flex md:flex-col lg:flex-row cursor-pointer p-3 scalling">
                <img [src]="getThumbnailUrl(stream.streamUrlCode)" alt="{{stream.streamTitle}}"
                class="w-1/2 h-24 md:w-full lg:w-1/2">
                <div class="stream-info p-2 overflow-hidden">
                    <p class="truncate dark:text-gray-300">{{stream.streamTitle}}</p>
                    <p class="truncate text-neutral-500">{{stream.author}}</p>
                    <p class="truncate text-neutral-500">{{stream.eventDate}}</p>
                </div>
            </div>
            }
        </aside>
    </div>
</section>