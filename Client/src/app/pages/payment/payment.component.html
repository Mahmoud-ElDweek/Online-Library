<section class="pt-12 pb-24 -z-30">
  <div class="container px-4 mx-auto">
    <!-- Tab Naviagation -->
    <div>
      <div class="mb-14 xl:mb-15">
        <ol
          class="grid grid-cols-1 divide-x divide-gray-100 overflow-hidden rounded-lg border border-gray-100 text-sm text-gray-500 sm:grid-cols-3"
        >
          <li
            class="flex items-center justify-center gap-4 p-6"
            [ngClass]="{ 'bg-gray-200': isDetailsDisabled }"
          >
            <button
              [disabled]="isDetailsDisabled"
              (click)="setActiveTab('orderSummary')"
              class="flex items-center cursor-pointer"
              [ngClass]="{
                'text-blue-500 font-medium': activeTab === 'orderSummary',
                'text-gray-500': activeTab !== 'orderSummary'
              }"
            >
              <p class="leading-none text-lg">
                <strong class="block font-semibold">
                  <i class="fas fa-info-circle text-xl mr-1"></i>
                  Details</strong
                >
                <small class="mt-1">Some info about your Cart.</small>
              </p>
            </button>
          </li>

          <li
            class="flex items-center justify-center gap-4 p-6"
            [ngClass]="{ 'bg-gray-200': isPaymentDisabled }"
          >
            <button
              [disabled]="isPaymentDisabled"
              (click)="setActiveTab('payment')"
              class="flex items-center cursor-pointer"
              [ngClass]="{
                'text-blue-500 font-medium': activeTab === 'payment',
                'text-gray-500': activeTab !== 'payment'
              }"
            >
              <p class="leading-none text-lg">
                <strong class="block font-semibold"
                  ><i class="fas fa-credit-card text-xl mr-2"></i>
                  Payment</strong
                >
                <small class="mt-1">Show us the money.</small>
              </p>
            </button>
          </li>

          <li class="relative flex items-center justify-center gap-4 p-6">
            <span
              class="absolute -left-2 top-1/2 hidden size-4 -translate-y-1/2 rotate-45 border border-gray-100 sm:block ltr:border-b-0 ltr:border-s-0 ltr:bg-white rtl:border-e-0 rtl:border-t-0 rtl:bg-gray-50"
            ></span>
            <span
              class="absolute -right-2 top-1/2 hidden size-4 -translate-y-1/2 rotate-45 border border-gray-100 sm:block ltr:border-b-0 ltr:border-s-0 ltr:bg-gray-50 rtl:border-e-0 rtl:border-t-0 rtl:bg-white"
            ></span>

            <button
              [ngClass]="{ 'disabled-class': isPaymentDisabled }"
              [disabled]="isPaymentDisabled && activeTab === 'confirmation'"
              (click)="setActiveTab('confirmation')"
              class="flex items-center cursor-pointer"
              [ngClass]="{
                'text-blue-500 font-medium': activeTab === 'confirmation',
                'text-gray-500': activeTab !== 'confirmation'
              }"
            >
              <p class="leading-none text-lg">
                <strong class="block font-semibold"
                  ><i class="fas fa-check-circle text-xl mr-1"></i>
                  Confirmation</strong
                >
                <small class="mt-1"> Thank you for your order! </small>
              </p>
            </button>
          </li>
        </ol>
      </div>
    </div>

    <!-- Tab Content -->
    <div class="flex justify-center">
      <div class="w-full md:w-4/5 lg:w-3/4 xl:w-2/3">
        <!-- ordersummery -->
        <div
          *ngIf="activeTab === 'orderSummary'"
          class="tab-content text-center"
        >
          <section class="bg-blueGray-100 mt-6">
            <div class="container mx-auto px-4">
              <div class="mb-8 text-2xl font-semibold text-gray-800">
                Your Order:
              </div>
              <div class="bg-white p-6 rounded-lg shadow-lg">
                <!-- Product List -->
                <div class="space-y-6">
                  <!-- Product Item -->
                  <div
                    *ngFor="let item of purchaseItems"
                    class="flex items-center justify-between border-b border-gray-200 pb-4"
                  >
                    <div class="flex items-center space-x-4">
                      <img
                        class="h-24 w-24 object-cover"
                        [src]="item.imageUrl"
                        alt="{{ item.name }}"
                      />
                      <div>
                        <a
                          class="text-lg font-medium hover:underline"
                          href="#"
                          >{{ item.name }}</a
                        >
                        <p class="text-gray-400">Author: {{ item.name }}</p>
                        <p class="text-gray-400">
                          Description: {{ item.name }}
                        </p>
                      </div>
                    </div>
                    <div class="text-right">
                      <p class="text-gray-400">Qty: {{ item.quantity }}</p>
                      <p class="text-blue-500">
                        $
                        <span class="text-blue-500 text-xl">{{
                          item.price
                        }}</span>
                      </p>
                    </div>
                  </div>
                </div>
                <!-- Summary -->
                <div class="lg:flex xl:items-center w-full mt-12">
                  <div class="lg:w-2/12 xl:w-1/12 mb-10 xl:mb-0">
                    <h3 class="text-xl font-heading font-medium">Summary</h3>
                  </div>
                  <div class="w-full lg:w-10/12 xl:w-11/12">
                    <div class="flex flex-wrap lg:justify-end -mx-3">
                      <div
                        class="w-full sm:w-1/2 lg:w-4/12 xl:w-3/12 px-3 mb-6 xl:mb-0"
                      >
                        <div
                          class="relative flex items-center justify-between py-4 px-10 leading-8 bg-white bg-opacity-50 font-medium rounded-3xl"
                        >
                          <div
                            class="absolute left-3 flex justify-center items-center w-20 h-20 bg-white rounded-full"
                          >
                            <div
                              class="flex justify-center items-center w-11 h-11 text-xl text-white font-bold bg-blue-500 rounded-full"
                            >
                              {{ totalQuantity }}
                            </div>
                          </div>
                          <span class="ml-16">Products</span>
                        </div>
                      </div>
                      <div
                        class="w-full sm:w-1/2 lg:w-4/12 xl:w-3/12 px-3 mb-3 xl:mb-0"
                      >
                        <div
                          class="flex items-center justify-between py-4 px-10 leading-8 bg-white bg-opacity-50 font-heading font-medium rounded-3xl"
                        >
                          <span>Shipping:</span>
                          <span class="flex items-center">
                            <span class="ml-2 mr-1 text-sm">$</span>
                            <span class="text-xl">10.00</span>
                          </span>
                        </div>
                      </div>
                      <div
                        class="w-full sm:w-1/2 lg:w-4/12 xl:w-3/12 px-3 mb-10 sm:mb-0"
                      >
                        <div
                          class="flex items-center justify-between py-4 px-10 leading-8 bg-white font-heading font-medium rounded-3xl"
                        >
                          <span>Total</span>
                          <span class="flex items-center text-blue-500">
                            <span class="mr-1 text-sm ml-3">$</span>
                            <span class="text-xl">{{ totalPrice }}</span>
                          </span>
                        </div>
                      </div>
                      <div
                        class="w-full sm:w-1/2 lg:max-w-max lg:ml-auto xl:ml-0 px-3"
                      >
                        <button
                          type="button"
                          class="block py-2 px-6 bg-blue-500 text-white font-semibold rounded-lg shadow-sm hover:bg-blue-600 transition duration-200 mt-4"
                          (click)="activeTab = 'payment'"
                        >
                          Next
                          <i class="fa-solid fa-arrow-right"></i>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </div>

        <!-- payment -->
        <div *ngIf="activeTab === 'payment'" class="tab-content text-center">
          <section class="bg-white py-8 antialiased dark:bg-gray-900 md:py-8">
            <div class="mx-auto max-w-screen-xl px-4 2xl:px-0">
              <div class="flex justify-center">
                <div class="w-full lg:max-w-4xl">
                  <!-- Increase max-w -->
                  <h2
                    class="text-5xl font-semibold text-gray-900 ml-12 dark:text-white sm:text-2xl"
                  >
                    Payment Gateway
                  </h2>
                  <div
                    id="accordionFlushExample"
                    class="border border-neutral-200 bg-white dark:border-neutral-600 dark:bg-body-dark mt-6 w-full"
                  >
                    <div class="border-b">
                      <h2 class="mb-0" id="flush-headingOne">
                        <button
                          class="flex w-full items-center px-5 py-4 text-left text-base text-neutral-800 hover:bg-gray-100 dark:bg-body-dark dark:text-slate-900"
                          type="button"
                          (click)="toggleAccordion('onlinePayment')"
                          aria-expanded="onlinePaymentOpen"
                          aria-controls="flush-collapseOne"
                        >
                          Online Payment
                          <span
                            class="ml-auto transition-transform"
                            [ngClass]="{ 'rotate-180': onlinePaymentOpen }"
                          >
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              fill="none"
                              viewBox="0 0 24 24"
                              stroke-width="1.5"
                              stroke="currentColor"
                              class="h-5 w-5"
                            >
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                d="M19.5 8.25l-7.5 7.5-7.5-7.5"
                              />
                            </svg>
                          </span>
                        </button>
                      </h2>
                      <div
                        id="flush-collapseOne"
                        class="overflow-hidden transition-height duration-200"
                        [ngClass]="{ hidden: !onlinePaymentOpen }"
                      >
                        <div class="px-5 py-4">
                          <!-- Content for Online Payment -->
                          <form
                            class="rounded-lg border border-gray-200 bg-white p-4 shadow-sm dark:border-gray-700 dark:bg-gray-800 sm:p-6 z-10 relative"
                          >
                            <ngx-paypal [config]="payPalConfig"></ngx-paypal>
                          </form>
                          <app-success-modal
                            [isVisible]="paymentSuccess"
                            (modalClosed)="onSuccessModalClose()"
                          ></app-success-modal>
                          <app-failure-modal
                            [isVisible]="paymentFailed"
                          ></app-failure-modal>
                        </div>
                      </div>
                    </div>
                    <div>
                      <h2 class="mb-0" id="flush-headingTwo">
                        <button
                          class="flex w-full items-center px-5 py-4 text-left text-base text-neutral-800 hover:bg-gray-100 dark:bg-body-dark dark:text-slate-900"
                          type="button"
                          (click)="toggleAccordion('payOnDelivery')"
                          aria-expanded="payOnDeliveryOpen"
                          aria-controls="flush-collapseTwo"
                        >
                          Pay on Delivery
                          <span
                            class="ml-auto transition-transform"
                            [ngClass]="{ 'rotate-180': payOnDeliveryOpen }"
                          >
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              fill="none"
                              viewBox="0 0 24 24"
                              stroke-width="1.5"
                              stroke="currentColor"
                              class="h-5 w-5"
                            >
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                d="M19.5 8.25l-7.5 7.5-7.5-7.5"
                              />
                            </svg>
                          </span>
                        </button>
                      </h2>
                      <div
                        id="flush-collapseTwo"
                        class="overflow-hidden transition-height duration-200"
                        [ngClass]="{ hidden: !payOnDeliveryOpen }"
                      >
                        <div class="px-5 py-4">
                          <!-- Content for Pay on Delivery -->
                          <!-- Billing Address -->
                          <form
                            class="mb-14 px-4 py-6 border border-gray-300 rounded-lg bg-white shadow-lg dark:border-gray-700 dark:bg-gray-800"
                          >
                            <h6
                              class="mb-4 text-lg font-semibold text-center text-gray-900 dark:text-white"
                            >
                              Billing Address
                            </h6>

                            <!-- Phone number input -->
                            <div class="mb-4">
                              <label
                                for="input-03-5"
                                class="mb-1.5 inline-block text-sm text-gray-800 dark:text-gray-200"
                              >
                                Phone number
                              </label>
                              <input
                                id="input-03-5"
                                name="phoneNumber"
                                type="tel"
                                class="py-2 px-3 w-full text-sm text-gray-900 placeholder-gray-500 bg-gray-100 border border-gray-400 rounded-lg focus:border-blue-500 focus:ring focus:ring-blue-200 transition duration-200 shadow-sm"
                                placeholder="Your phone number"
                              />
                            </div>

                            <!-- Street name and house number input -->
                            <div class="mb-4">
                              <label
                                for="input-03-6"
                                class="mb-1.5 inline-block text-sm text-gray-800 dark:text-gray-200"
                              >
                                Street name and house number
                              </label>
                              <input
                                id="input-03-6"
                                name="streetName"
                                type="text"
                                class="py-2 px-3 w-full text-sm text-gray-900 placeholder-gray-500 bg-gray-100 border border-gray-400 rounded-lg focus:border-blue-500 focus:ring focus:ring-blue-200 transition duration-200 shadow-sm"
                                placeholder="-"
                              />
                            </div>

                            <!-- City, Region, Postal Code, Country inputs -->
                            <div class="flex flex-wrap -m-2">
                              <div class="w-full md:w-1/2 p-2">
                                <div>
                                  <label
                                    for="input-03-7"
                                    class="mb-1.5 inline-block text-sm text-gray-800 dark:text-gray-200"
                                  >
                                    City
                                  </label>
                                  <input
                                    id="input-03-7"
                                    name="city"
                                    type="text"
                                    class="py-2 px-3 w-full text-sm text-gray-900 placeholder-gray-500 bg-gray-100 border border-gray-400 rounded-lg focus:border-blue-500 focus:ring focus:ring-blue-200 transition duration-200 shadow-sm"
                                    placeholder="Your city"
                                  />
                                </div>
                              </div>
                              <div class="w-full md:w-1/2 p-2">
                                <div>
                                  <label
                                    for="select-03-1"
                                    class="mb-1.5 inline-block text-sm text-gray-800 dark:text-gray-200"
                                  >
                                    Region
                                  </label>
                                  <select
                                    name="region"
                                    id="select-03-1"
                                    class="appearance-none block py-2 px-3 w-full text-sm text-gray-900 bg-gray-100 border border-gray-400 rounded-lg focus:border-blue-500 focus:ring focus:ring-blue-200 transition duration-200 shadow-sm"
                                  >
                                    <option value="" selected disabled hidden>
                                      Select region
                                    </option>
                                    <option value="region1">Region 1</option>
                                    <option value="region2">Region 2</option>
                                    <option value="region3">Region 3</option>
                                    <option value="region4">Region 4</option>
                                  </select>
                                </div>
                              </div>
                              <div class="w-full md:w-1/2 p-2">
                                <div>
                                  <label
                                    for="input-03-8"
                                    class="mb-1.5 inline-block text-sm text-gray-800 dark:text-gray-200"
                                  >
                                    Postal code
                                  </label>
                                  <input
                                    id="input-03-8"
                                    name="postalCode"
                                    type="text"
                                    class="py-2 px-3 w-full text-sm text-gray-900 placeholder-gray-500 bg-gray-100 border border-gray-400 rounded-lg focus:border-blue-500 focus:ring focus:ring-blue-200 transition duration-200 shadow-sm"
                                    placeholder="Your postal code"
                                  />
                                </div>
                              </div>
                              <div class="w-full md:w-1/2 p-2">
                                <div>
                                  <label
                                    for="select-03-2"
                                    class="mb-1.5 inline-block text-sm text-gray-800 dark:text-gray-200"
                                  >
                                    Country
                                  </label>
                                  <select
                                    name="country"
                                    id="select-03-2"
                                    class="appearance-none block py-2 px-3 w-full text-sm text-gray-900 bg-gray-100 border border-gray-400 rounded-lg focus:border-blue-500 focus:ring focus:ring-blue-200 transition duration-200 shadow-sm"
                                  >
                                    <option value="" selected disabled hidden>
                                      Select country
                                    </option>
                                    <option value="poland">Poland</option>
                                    <option value="france">France</option>
                                    <option value="italy">Italy</option>
                                    <option value="australia">Australia</option>
                                  </select>
                                </div>
                              </div>
                            </div>

                            <!-- Buttons -->
                            <div class="flex justify-between mt-6">
                              <button
                                type="button"
                                class="py-2 px-4 text-sm text-gray-900 bg-gray-300 border border-gray-400 rounded-lg hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-200 transition duration-200"
                              >
                                Reset
                              </button>
                              <button
                                type="submit"
                                class="py-2 px-4 text-sm text-white bg-blue-600 border border-blue-700 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-300 transition duration-200"
                                (click)="confirmOrder()"
                              >
                                Confirm & Order
                              </button>
                            </div>
                          </form>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </div>

        <!-- Order Confirmation -->
        <div
          *ngIf="activeTab === 'confirmation'"
          class="tab-content text-center py-4"
        >
          <div class="container mx-auto px-4">
            <div class="border border-gray-50 rounded-2xl px-6 md:px-12 py-12">
              <div class="pb-10 border-b border-gray-50">
                <h1 class="font-heading uppercase text-3xl">
                  Your order has been confirmed and will be shipping soon... 🎉
                </h1>
              </div>
              <div class="py-6 border-b border-gray-50">
                <div class="flex flex-wrap -m-4">
                  <div class="w-full md:w-1/4 p-4">
                    <p class="text-gray-500 mb-2">Order Date</p>
                    <p class="font-semibold">
                      {{ orderDate }}
                    </p>
                  </div>
                  <div class="w-full md:w-1/4 p-4">
                    <p class="text-gray-500 mb-2">Order Number</p>
                    <p class="font-semibold">{{ orderId }}</p>
                  </div>
                  <div class="w-full md:w-1/4 p-4">
                    <p class="text-gray-500 mb-2">Payment</p>
                    <p class="font-semibold">{{ paymentMethod }}</p>
                  </div>
                  <div class="w-full md:w-1/4 p-4">
                    <p class="text-gray-500 mb-2">Address</p>
                    <p class="font-semibold">{{ shippingAddress }}</p>
                  </div>
                </div>
              </div>
              <div class="py-6 border-b border-gray-50">
                <div
                  *ngFor="let item of purchaseItems"
                  class="flex justify-between flex-wrap pb-4"
                >
                  <div class="w-full md:w-1/3 p-4">
                    <div class="flex items-center gap-4">
                      <img
                        class="h-20 rounded-xl"
                        [src]="item.imageUrl"
                        alt="{{ item.name }}"
                      />
                      <div class="flex-1">
                        <p class="font-semibold mb-1 break-words">
                          {{ item.name }}
                        </p>
                      </div>
                    </div>
                  </div>
                  <div class="w-full md:w-1/3 p-4">
                    <div class="flex md:justify-center">
                      <p>
                        <span>Quantity:</span>
                        <span class="font-semibold">{{ item.quantity }}</span>
                      </p>
                    </div>
                  </div>
                  <div class="w-full md:w-1/3 p-4">
                    <p class="text-green-900 font-semibold md:text-right">
                      ${{ item.price }}
                    </p>
                  </div>
                </div>
              </div>
              <div class="py-6 border-b border-gray-50 mb-10">
                <div class="flex justify-between flex-wrap">
                  <p class="text-xl font-semibold">Total</p>
                  <p class="text-xl font-semibold">${{ totalPrice }}</p>
                </div>
              </div>
              <p class="text-gray-500 mb-3">
                We’ll send you shipping confirmation when your item(s) are on
                the way! We appreciate your business, and hope you enjoy your
                purchase.
              </p>
              <p class="text-gray-500">Thank you!</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
